// This is your Prisma schema file for PostgreSQL
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/prisma-postgres"
}

datasource db {
  provider = "postgresql"
}

// Shortcut table - stores keyboard shortcuts for different applications
model Shortcut {
  id        String   @id @default(uuid())
  app       String   // Application identifier (e.g., "vim", "vscode")
  action    String   // Action description (e.g., "Copy", "Paste")
  
  // Platform-specific keyboard shortcuts
  keysMac     String?  @map("keys_mac")
  keysWindows String?  @map("keys_windows")
  keysLinux   String?  @map("keys_linux")
  
  context   String?  // Context where shortcut applies (e.g., "Normal Mode", "Insert Mode")
  category  String?  // Category grouping (e.g., "Editing", "Navigation")
  tags      String   // Comma-separated tags for searching
  
  // Source metadata
  sourceType       String   @map("source_type") // 'official' | 'community' | 'ai-scraped' | 'user-added'
  sourceUrl        String?  @map("source_url")
  sourceScrapedAt  DateTime? @map("source_scraped_at")
  sourceConfidence Float?   @map("source_confidence")
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  @@index([app])
  @@index([action])
  @@index([category])
  @@map("shortcuts")
}

// AppInfo table - stores metadata about applications
model AppInfo {
  id            String   @id @default(uuid())
  name          String   @unique // Application name (e.g., "vscode")
  displayName   String   @map("display_name") // Display name (e.g., "Visual Studio Code")
  category      String   // Application category (e.g., "Code Editor")
  platforms     String   // Comma-separated platforms: 'mac,windows,linux'
  shortcutCount Int      @default(0) @map("shortcut_count")
  
  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")
  
  @@index([name])
  @@index([category])
  @@map("app_info")
}
